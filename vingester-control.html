<!DOCTYPE html>
<!--
**  Vingester ~ Ingest Web Contents as Video Streams
**  Copyright (c) 2021 Dr. Ralf S. Engelschall <rse@engelschall.com>
**  Licensed under GPL 3.0 <https://spdx.org/licenses/GPL-3.0-only>
-->
<html>
    <head>
        <!-- application title -->
        <title>Vingester</title>

        <!-- general meta-information -->
        <meta charset="UTF-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
        <meta http-equiv="Content-Security-Policy" content="script-src 'self' 'unsafe-inline' 'unsafe-eval' blob:; worker-src 'self' 'unsafe-inline' 'unsafe-eval' blob:;"/>

        <!-- load dependency: FontAwesome -->
        <link rel="stylesheet" type="text/css" href="node_modules/@fortawesome/fontawesome-free/css/all.min.css">
        <script type="text/javascript" src="node_modules/@fortawesome/fontawesome-free/js/all.min.js"></script>

        <!-- load dependency: TypoPRO -->
        <link rel="stylesheet" type="text/css" href="node_modules/typopro-web/web/TypoPRO-SourceSansPro/TypoPRO-SourceSansPro.css">
        <link rel="stylesheet" type="text/css" href="node_modules/typopro-web/web/TypoPRO-SourceCodePro/TypoPRO-SourceCodePro.css">
        <link rel="stylesheet" type="text/css" href="node_modules/typopro-web/web/TypoPRO-Overlock/TypoPRO-Overlock.css">

        <!-- load dependency: VueJS -->
        <script type="text/javascript" src="node_modules/sprintfjs/sprintf.js"></script>
        <script type="text/javascript" src="node_modules/vue/dist/vue.global.prod.js"></script>
        <link rel="stylesheet/less" type="text/css" href="node_modules/vue3-perfect-scrollbar/dist/vue3-perfect-scrollbar.css"/>
        <link rel="stylesheet/less" type="text/css" href="node_modules/tippy.js/dist/tippy.css"/>
        <link rel="stylesheet/less" type="text/css" href="node_modules/tippy.js/themes/translucent.css"/>

        <!-- load application style -->
        <link rel="stylesheet/less" type="text/css" href="vingester-control.css"/>

        <!-- load dependency: Less -->
        <script type="text/javascript" src="node_modules/less/dist/less.min.js"></script>
    </head>
    <body>
        <div class="ui">
            <div class="ui-head">
                <div class="row row-1">
                    <div class="row-left">
                        <img class="title-icon" src="vingester-icon.png" alt="Vingester"/>
                        <div class="title-text">
                            Vingester
                        </div>
                        <div class="title-subtext">
                            &mdash; INGEST WEB CONTENTS AS VIDEO STREAMS
                        </div>
                    </div>
                    <div class="row-middle">
                    </div>
                    <div class="row-right">
                        <div class="icons">
                            <div v-tippy="{ placement: 'bottom', content: 'Click to ' + (info ? 'close' : 'open') + ' the<br/>application information.' }"
                                class="icon" v-on:click="modalToggle('info')">
                                <i class="fas fa-info-circle"></i>
                            </div>
                            <div v-tippy="{ placement: 'bottom', content: 'Click to check for<br/>application updates.' }"
                                class="icon" v-bind:class="{ blink: updateNotifyBlink }"
                                v-on:click="modalToggle('update')">
                                <i class="fas fa-cloud-download-alt"></i>
                            </div>
                            <div class="icon-sep">
                            </div>
                            <div v-tippy="{ placement: 'bottom', content: 'Minimize window.' }"
                                class="icon" v-on:click="windowControl('minimize')">
                                <i class="fas fa-window-minimize"></i>
                            </div>
                            <div v-tippy="{ placement: 'bottom', content: 'Maximize window.' }"
                                class="icon" v-on:click="windowControl('maximize')">
                                <i class="fas fa-window-maximize"></i>
                            </div>
                            <div v-tippy="{ placement: 'bottom', content: 'Resize to smallest<br/>possible window size.' }"
                                class="icon" v-on:click="windowControl('standard')">
                                <i class="fas fa-caret-square-down"></i>
                            </div>
                            <div v-tippy="{ placement: 'bottom', content: 'Switch to fullscreen mode.' }"
                                class="icon" v-on:click="windowControl('fullscreen')">
                                <i class="fas fa-caret-square-up"></i>
                            </div>
                            <div v-tippy="{ placement: 'bottom', content: 'Quit application.' }"
                                class="icon" v-on:click="windowControl('close')">
                                <i class="fas fa-window-close"></i>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="">
                    <div class="box">
                        <div class="row row-3">
                            <div class="row-left">
                                <div class="button-plus">
                                    <div v-tippy="{ placement: 'bottom', content: 'Create new browser<br/>configuration entry.' }"
                                        v-on:click="addBrowser">
                                        <i class="fas fa-plus-circle"></i>
                                    </div>
                                </div>
                                <div class="field field-start"
                                    v-tippy="{ placement: 'bottom', content: 'Start all not<br/>running browsers.' }"
                                    v-bind:class="{ disabled: nAvailable === 0 || nAvailable === nRunning }"
                                    v-on:click="control('start-all', null)">
                                    <i class="fas fa-play"></i> &nbsp;START
                                </div>
                                <div class="field field-reload"
                                    v-tippy="{ placement: 'bottom', content: 'Reload all<br/>running browsers.' }"
                                    v-bind:class="{ disabled: nRunning === 0 }"
                                    v-on:click="control('reload-all', null)">
                                    <i class="fas fa-redo"></i> &nbsp;RELOAD
                                </div>
                                <div class="field field-stop"
                                    v-tippy="{ placement: 'bottom', content: 'Stop all<br/>running browsers.' }"
                                    v-bind:class="{ disabled: nRunning === 0 }"
                                    v-on:click="control('stop-all', null)">
                                    <i class="fas fa-pause"></i> &nbsp;STOP
                                </div>
                            </div>
                            <div class="row-middle">
                                <div class="field field-usage"
                                    v-tippy="{ placement: 'bottom', content: 'Shows the current<br>overall CPU usage.' }">
                                    <i class="fas fa-microchip"></i> &nbsp;CPU: {{ usage.toFixed(1) }}%
                                </div>
                                <div class="field field-gpu" v-on:click="toggleGPU"
                                    v-tippy="{ placement: 'bottom', content: (gpu ? 'Disable the currently enabled' : 'Enable the currently disabled') + '<br/>GPU hardware acceleration.<br/>Enable for Frameless mode.<br/>Disable for Headless mode.' }">
                                    <span v-show="gpu"><i class="fas fa-check-circle"></i>&nbsp;&nbsp;GPU: YES</span>
                                    <span v-show="!gpu"><i class="fas fa-times-circle"></i>&nbsp;&nbsp;GPU: NO</span>
                                </div>
                            </div>
                            <div class="row-right">
                                <div v-tippy="{ placement: 'bottom', content: 'Export browser configurations<br/>to external YAML file.' }"
                                    class="field field-export" v-on:click="exportBrowsers">
                                    <i class="fas fa-upload"></i> &nbsp;EXPORT
                                </div>
                                <div v-tippy="{ placement: 'bottom', content: 'Import browser configurations<br/>from external YAML file.' }"
                                    class="field field-import" v-on:click="importBrowsers">
                                    <i class="fas fa-download"></i> &nbsp;IMPORT
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="ui-modal" v-show="modal !== ''">
                <div class="ui-modal-info" v-show="modal === 'info'">
                    <div class="about">
                        <p>
                        <a href="https://vingester.app/" v-on:click="openURL">Vingester</a> (<b>V</b>ideo <b>ingester</b>) is a small,
                        <a href="https://spdx.org/licenses/GPL-3.0-only" v-on:click="openURL">Open Source licensed</a>, and
                        <a href="https://www.electronjs.org/" v-on:click="openURL">Electron</a>-based desktop
                        application for use under Windows, macOS or Linux to run multiple
                        <a href="https://www.chromium.org/" v-on:click="openURL">Chromium</a>-based
                        Web browser instances and ingesting their rendered Web Contents as screen/window-captured or
                        <a href="https://ndi.tv" v-on:click="openURL">NDI&reg;</a>-multicasted video streams for further
                        use in video mixing applications.
                        </p>
                        <p>
                        Although not technically tied to it, the primary use-case of Vingester is to ingest
                        the individual meeting participants of the awesome WebRTC-based <a href="https://obs.ninja" v-on:click="openURL">OBS.Ninja</a> solution as
                        individual NDI-based video-streams into the mixing application <a href="https://obsproject.com" v-on:click="openURL">OBS Studio</a>
                        in order to reduce performance drains within OBS Studio. The OBS.Ninja URLs
                        of the ingested video-streams can be generated best with the opinionated companion tool
                        <a href="https://rse.github.io/obs-ninja-trampoline/" v-on:click="openURL">OBS.Ninja Trampoline</a>.
                        </p>
                    </div>
                    <div class="about-2">
                        <div class="logo">
                            <img class="icon" src="vingester-icon.png" alt="Vingester"/>
                            <div class="name"><a href="https://vingester.app" v-on:click="openURL">Vingester</a></div>
                        </div>
                        <div class="version"><a v-bind:href="'https://github.com/rse/vingester/releases/tag/' + version.vingester" v-on:click="openURL">{{version.vingester}}</a></div>
                        <div class="url"><a href="https://vingester.app" v-on:click="openURL">https://vingester.app</a></div>
                        <div class="copyright">
                            Copyright &copy; 2021 <a href="https://engelschall.com" v-on:click="openURL">Dr. Ralf S. Engelschall</a><br/>
                            Licensed under <a href="https://spdx.org/licenses/GPL-3.0-only" v-on:click="openURL">GPL 3.0</a>
                        </div>
                        <table class="versions">
                            <tr><td>Electron</td> <td><b>{{version.electron}}</b></td> <td class="copyright">&copy; Github, Inc.</td></tr>
                            <tr><td>Chromium</td> <td><b>{{version.chromium}}</b></td> <td class="copyright">&copy; Google LLC</td></tr>
                            <tr><td>V8</td>       <td><b>{{version.v8}}</b></td>       <td class="copyright">&copy; Google LLC</td></tr>
                            <tr><td>Node.js&trade;</td>     <td><b>{{version.node}}</b></td>     <td class="copyright">&copy; OpenJS Foundation</td></tr>
                            <tr><td>NDI&reg;</td>      <td><b>{{version.ndi}}</b></td>      <td class="copyright">&copy; NewTek, Inc.</td></tr>
                        </table>
                    </div>
                </div>
                <div class="ui-modal-update" v-if="modal === 'update'">
                    <div class="recheck-button update-button"
                        v-bind:class="{ disabled: updateProgress !== null }"
                        v-on:click="updateCheck">
                        <i class="fas fa-sync-alt"></i>
                        &nbsp;
                        RE-CHECK
                    </div>
                    <div class="versions">
                        <div class="versions-row headline">
                            <div class="col-1 type">Type</div>
                            <div class="col-2 version">Version</div>
                            <div class="col-3 date">Date</div>
                        </div>
                        <div v-if="updateVersions.forthcoming.version" class="versions-row">
                            <div class="col-1 type">Forthcoming:</div>
                            <div class="col-2 version">
                                <a v-bind:href="'https://github.com/rse/vingester/releases/tag/' + updateVersions.forthcoming.version"
                                    v-on:click="openURL">
                                    {{ updateVersions.forthcoming.version }}
                                </a>
                            </div>
                            <div class="col-3 date">{{ updateVersions.forthcoming.date }}</div>
                            <div class="col-4 update-button"
                                v-if="updateUpdateable"
                                v-show="updateProgress === null && updateVersions.forthcoming.version !== updateVersions.running.version"
                                v-on:click="updateToVersion(updateVersions.forthcoming.version)">
                                <i class="fas fa-cloud-download-alt"></i>
                                &nbsp;
                                Update
                            </div>
                            <div class="col-4"
                                v-if="!updateUpdateable"
                                v-show="updateProgress === null && updateVersions.forthcoming.version !== updateVersions.running.version">
                                <a class="update-button" v-bind:href="'https://github.com/rse/vingester/releases/tag/' + updateVersions.forthcoming.version"
                                    v-on:click="openURL">
                                    <i class="fas fa-external-link-alt"></i>
                                    &nbsp;
                                    Download
                                </a>
                            </div>
                        </div>
                        <div v-if="updateVersions.current.version" class="versions-row">
                            <div class="col-1 type">Current:</div>
                            <div class="col-2 version">
                                <a v-bind:href="'https://github.com/rse/vingester/releases/tag/' + updateVersions.current.version"
                                    v-on:click="openURL">
                                    {{ updateVersions.current.version }}
                                </a>
                            </div>
                            <div class="col-3 date">{{ updateVersions.current.date }}</div>
                            <div class="col-4 update-button"
                                v-if="updateUpdateable"
                                v-show="updateProgress === null && updateVersions.current.version !== updateVersions.running.version"
                                v-on:click="updateToVersion(updateVersions.current.version)">
                                <i class="fas fa-cloud-download-alt"></i>
                                &nbsp;
                                Update
                            </div>
                            <div class="col-4"
                                v-if="!updateUpdateable"
                                v-show="updateProgress === null && updateVersions.current.version !== updateVersions.running.version">
                                <a class="update-button" v-bind:href="'https://github.com/rse/vingester/releases/tag/' + updateVersions.current.version"
                                    v-on:click="openURL">
                                    <i class="fas fa-external-link-alt"></i>
                                    &nbsp;
                                    Download
                                </a>
                            </div>
                        </div>
                        <div v-if="!updateVersions.current.version" class="versions-row">
                            <div class="col-1 type">Current:</div>
                            <div class="col-2 version">N.A.</div>
                            <div class="col-3 date">N.A.</div>
                        </div>
                        <div v-if="updateVersions.running.version" class="versions-row">
                            <div class="col-1 type">Running:</div>
                            <div class="col-2 version">
                                <a v-bind:href="'https://github.com/rse/vingester/releases/tag/' + updateVersions.running.version"
                                    v-on:click="openURL">
                                    {{ updateVersions.running.version }}
                                </a>
                            </div>
                            <div class="col-3 date">{{ updateVersions.running.date }}</div>
                        </div>
                        <div v-if="!updateVersions.running.version" class="versions-row">
                            <div class="col-1 type">Running:</div>
                            <div class="col-2 version">N.A.</div>
                            <div class="col-3 date">N.A.</div>
                        </div>
                    </div>
                    <div class="desc" v-if="updateVersions.running.type">
                        You are currently running Vingester version {{ updateVersions.running.version }}.<br/>
                        <span v-if="updateVersions.forthcoming.version === updateVersions.running.version">
                            This <b>running</b> version is already the <b>forthcoming</b> version.<br/>
                            Currently, there is still no update necessary.<br/>
                        </span>
                        <span v-if="updateVersions.current.version === updateVersions.running.version">
                            This <b>running</b> version is still the <b>current</b> version.<br/>
                            Currently, there is still no update necessary.<br/>
                        </span>
                        <span v-if="updateVersions.current.version !== updateVersions.running.version">
                            This <b>running</b> version is in state <b>{{ updateVersions.running.type }}</b>.<br/>
                            Please switch to the <b>current</b> version <b>{{ updateVersions.current.version }}</b>!<br/>
                        </span>
                        <span v-if="updateVersions.forthcoming.version && updateVersions.forthcoming.version !== versions.running.version">
                            At your option, you can even switch to the <b>forthcoming</b> version
                            <b>{{ updateVersions.forthcoming.version }}</b>.<br/>
                        </span>
                    </div>
                    <div class="desc" v-if="!updateVersions.running.type">
                        There is still no information available about the
                        running, current and optionally forthcoming version.
                        Please wait for the information to be gathered automatically
                        once at program start or manually trigger an update check!
                    </div>
                    <div class="hint">
                        <span v-if="updateUpdateable">
                            <b>Hint:</b>&nbsp;
                            Vingester is automatically updateable from this dialog.
                            <span v-if="updateVersions.current.version !== updateVersions.running.version">
                                Just press the "<b>Update!</b>" button above
                                for updating to the particular version, please!
                            </span>
                        </span>
                        <span v-if="!updateUpdateable">
                            <b>Hint:</b>&nbsp;
                            <a href="https://github.com/rse/vingester" v-on:click="openURL">Vingester</a>
                            unfortunately is <u>not</u> automatically updateable
                            from this dialog, because you are <u>not</u>
                            running a packaged version or the application files can
                            <u>not</u> be overwritten with the current user permissions.
                            <span v-if="updateVersions.current.version !== updateVersions.running.version">
                                For updating, either re-start Vingester
                                with elevated user privileges or press the "<b>Download</b>" button
                                above to just open the updated version in your Browser and then perform the
                                download and update manually, please!
                            </span>
                        </span>
                    </div>
                    <div class="progress" v-if="updateProgress !== null">
                        <b>Progress:</b>
                        <div class="spinner">
                            <i class="fas fa-spinner fa-spin"></i>
                        </div>
                        {{ updateProgress.task }}
                        <div class="completion">
                            <div class="total"></div>
                            <div class="completed" v-bind:style="{ width: (updateProgress.completed * 100) + '%' }"></div>
                            <div class="caption">{{ (updateProgress.completed * 100).toFixed(0) + '%' }}</div>
                        </div>
                    </div>
                    <div class="progress" v-if="updateProgress === null">
                        <b>Progress:</b>
                        none
                        <div class="completion">
                            <div class="total disabled"></div>
                        </div>
                    </div>
                    <div class="error" v-if="updateError !== null">
                        <b>ERROR:</b>
                        {{ updateError }}
                    </div>
                </div>
            </div>
            <div class="ui-head-placeholder">
            </div>
            <div class="ui-body">
                <perfect-scrollbar>
                    <div class="browsers">
                        <div v-for="(browser, i) in browsers" v-bind:key="browser.id" class="browser" v-bind:class="{ running: running[browser.id] }">
                            <div class="button-control">
                                <div class="button" v-tippy="{ placement: 'bottom', content: 'Delete this browser<br/>configuration entry.' }"
                                    v-on:click="delBrowser(browser)">
                                    <i class="fas fa-minus-circle"></i>
                                </div>
                                <div class="button" v-bind:class="{ disabled: i === 0 }" v-tippy="{ placement: 'bottom', content: 'Move this browser<br/>configuration entry upward.' }"
                                    v-on:click="moveBrowser(browser, 'up')">
                                    <i class="fas fa-arrow-alt-circle-up"></i>
                                </div>
                                <div class="button" v-bind:class="{ disabled: i === browsers.length - 1 }" v-tippy="{ placement: 'bottom', content: 'Move this browser<br/>configuration entry downward.' }"
                                    v-on:click="moveBrowser(browser, 'down')">
                                    <i class="fas fa-arrow-alt-circle-down"></i>
                                </div>
                                <div class="button" v-tippy="{ placement: 'bottom', content: 'Clone this browser<br/>configuration entry.' }"
                                    v-on:click="cloneBrowser(browser)">
                                    <i class="fas fa-clone"></i>
                                </div>
                            </div>
                            <div class="box">
                                <div class="preview" v-show="browser.P && running[browser.id]"
                                    v-tippy="{ placement: 'bottom', content: 'Shows a thumbnail preview (128x72px)<br/>of the Web Content rendering.' }">
                                    <canvas v-bind:ref="'canvas-' + browser.id" width="128" height="72"></canvas>
                                </div>
                                <div class="tally" v-show="browser.N && running[browser.id]"
                                    v-bind:class="[ 'tally-' + tally[browser.id] ]"
                                    v-tippy="{ placement: 'bottom', content: 'NDI stream is ' + tally[browser.id] }">
                                </div>
                                <div class="row">
                                    <div class="group">BROWSER:</div>
                                    <div class="label label-title">Title:</div>
                                    <div class="field field-title"
                                        v-tippy="{ placement: 'top', content: 'Title of browser window<br/>or name of NDI stream.' }">
                                        <input type="text" v-model="browser.t" v-on:keyup="changed(browser)"
                                            v-bind:class="{ disabled: running[browser.id] }"
                                            v-bind:disabled="running[browser.id]">
                                    </div>
                                    <div class="label label-size">Size:</div>
                                    <div class="field"
                                        v-tippy="{ placement: 'top', content: 'Width of browser canvas in pixels.<br/>Use 854 for 480p, 1280 for 720p or 1920 for 1080p.' }">
                                        <input type="text" v-model="browser.w" v-on:keyup="changed(browser)"
                                            v-bind:class="{ disabled: running[browser.id] }"
                                            v-bind:disabled="running[browser.id]">
                                    </div>
                                    <div class="sep">x</div>
                                    <div class="field"
                                        v-tippy="{ placement: 'top', content: 'Height of browser canvas in pixels.<br/>Use 480 for 480p, 720 for 720p or 1080 for 1080p.' }">
                                        <input type="text" v-model="browser.h" v-on:keyup="changed(browser)"
                                            v-bind:class="{ disabled: running[browser.id] }"
                                            v-bind:disabled="running[browser.id]">
                                    </div>
                                    <div class="label">Color:</div>
                                    <div class="field field-color"
                                        v-tippy="{ placement: 'top', content: 'Background color of browser canvas.<br/>Use \'#RRGGBB\' or \'transparent\'.' }">
                                        <input type="text" v-model="browser.c" v-on:keyup="changed(browser)"
                                            v-bind:class="{ disabled: running[browser.id] }"
                                            v-bind:disabled="running[browser.id]">
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="group">INPUT:</div>
                                    <div class="label label-url">URL:</div>
                                    <div class="field field-url"
                                        v-tippy="{ placement: 'top', content: 'Uniform Resource Locator (URL)<br/>of Web Content to render.' }">
                                        <input type="text" v-model="browser.u" v-on:keyup="changed(browser)"
                                            v-bind:class="{ disabled: running[browser.id] }"
                                            v-bind:disabled="running[browser.id]">
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="group">OUTPUT 1:</div>
                                    <div class="label label-output">Frameless (WIN):</div>
                                    <div class="field"
                                        v-tippy="{ placement: 'top', content: 'Click to ' + (browser.D ? 'disable' : 'enable') + ' Frameless mode, where<br/>Web Content is rendered into a desktop window.' }">
                                        <div class="toggle" v-on:click="toggle(browser, 'D', [ true, false ])">
                                            <div class="toggle-option" v-bind:class="{ selected: browser.D === true  }"><i class="fas fa-check-circle"></i>&nbsp;&nbsp;YES</div>
                                            <div class="toggle-option" v-bind:class="{ selected: browser.D === false }"><i class="fas fa-times-circle"></i>&nbsp;&nbsp;NO</div>
                                        </div>
                                    </div>
                                    <div class="cluster" v-show="browser.D">
                                        <div class="label label-pos">Pos:</div>
                                        <div class="field"
                                            v-tippy="{ placement: 'top', content: 'X-Position of desktop window (0 is at left border)<br/>(absolute or relative to display).' }">
                                            <input type="text" v-model="browser.x" v-on:keyup="changed(browser)"
                                                v-bind:class="{ disabled: running[browser.id] }"
                                                v-bind:disabled="running[browser.id]">
                                        </div>
                                        <div class="sep">x</div>
                                        <div class="field"
                                            v-tippy="{ placement: 'top', content: 'Y-Position of desktop window (0 is at top border)<br/>(absolute or relative to display).' }">
                                            <input type="text" v-model="browser.y" v-on:keyup="changed(browser)"
                                                v-bind:class="{ disabled: running[browser.id] }"
                                                v-bind:disabled="running[browser.id]">
                                        </div>
                                        <div class="sep">@</div>
                                        <div class="field"
                                            v-tippy="{ placement: 'top', content: 'Selection of display for relative positioning. If empty or set to 0,0, X/Y-positions are relative to the primary display. Use -1,0 for the display on the left side, 0,-1 for the display at the top, etc.' }">
                                            <input type="text" v-model="browser.d" v-on:keyup="changed(browser)"
                                                v-bind:class="{ disabled: running[browser.id] }"
                                                v-bind:disabled="running[browser.id]">
                                        </div>
                                        <div class="label">Pin:</div>
                                        <div class="field"
                                            v-tippy="{ placement: 'top', content: 'Click to ' + (browser.p ? 'disable' : 'enable') + ' pinning the desktop window to the top,<br/>i.e., above all other windows on the desktop.' }">
                                            <div class="toggle" v-on:click="toggle(browser, 'p', [ true, false ])">
                                                <div class="toggle-option toggle-option-pin"   v-bind:class="{ selected: browser.p === true  }"><i class="fas fa-check-circle"></i>&nbsp;&nbsp;YES</div>
                                                <div class="toggle-option toggle-option-nopin" v-bind:class="{ selected: browser.p === false }"><i class="fas fa-times-circle"></i>&nbsp;&nbsp;NO</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="group">OUTPUT 2:</div>
                                    <div class="label label-output">Headless (NDI&reg;):</div>
                                    <div class="field"
                                        v-tippy="{ placement: 'top', content: 'Click to ' + (browser.N ? 'disable' : 'enable') + ' Headless mode, where<br/>Web Content is multicasted via NDI.' }">
                                        <div v-if="!support.ndi">
                                            NOT SUPPORTED
                                        </div>
                                        <div v-if="support.ndi" class="toggle" v-on:click="toggle(browser, 'N', [ true, false ])">
                                            <div class="toggle-option" v-bind:class="{ selected: browser.N === true  }"><i class="fas fa-check-circle"></i>&nbsp;&nbsp;YES</div>
                                            <div class="toggle-option" v-bind:class="{ selected: browser.N === false }"><i class="fas fa-times-circle"></i>&nbsp;&nbsp;NO</div>
                                        </div>
                                    </div>
                                    <div class="cluster" v-show="browser.N">
                                        <div class="label">FPS:</div>
                                        <div class="field field-fps"
                                            v-tippy="{ placement: 'top', content: 'Frames per second for the NDI video-stream.<br/>Usually you want to use 30 or 60.' }">
                                            <input type="text" v-model="browser.f" v-on:keyup="changed(browser)"
                                                v-bind:class="{ disabled: running[browser.id] }"
                                                v-bind:disabled="running[browser.id]">
                                        </div>
                                        <div class="label">AC:</div>
                                        <div class="field field-channels"
                                            v-tippy="{ placement: 'top', content: 'Number of channels for the NDI audio-stream.<br/>Usually you want to use 0 (none), 1 (mono) or 2 (stereo).' }">
                                            <input type="text" v-model="browser.C" v-on:keyup="changed(browser)"
                                                v-bind:class="{ disabled: running[browser.id] }"
                                                v-bind:disabled="running[browser.id]">
                                        </div>
                                        <div class="label">SPS:</div>
                                        <div class="field field-sps"
                                            v-tippy="{ placement: 'top', content: 'Samples per second for the NDI audio-stream.<br/>Only sample rates of underlying OPUS technology supported.' }">
                                            <div class="toggle" v-on:click="toggle(browser, 'r', [ 8000, 12000, 16000, 24000, 48000 ])">
                                                <div class="toggle-option" v-bind:class="{ selected: browser.r === 8000 }">8kHz</div>
                                                <div class="toggle-option" v-bind:class="{ selected: browser.r === 12000 }">12kHz</div>
                                                <div class="toggle-option" v-bind:class="{ selected: browser.r === 16000 }">16kHz</div>
                                                <div class="toggle-option" v-bind:class="{ selected: browser.r === 24000 }">24kHz</div>
                                                <div class="toggle-option" v-bind:class="{ selected: browser.r === 48000 }">48kHz</div>
                                            </div>
                                        </div>
                                        <div class="label">Delay:</div>
                                        <div class="field field-delay"
                                            v-tippy="{ placement: 'top', content: 'Delay in milliseconds for the NDI video-stream.<br/>Usually you want to use 0 or up to about 150.' }">
                                            <input type="text" v-model="browser.O" v-on:keyup="changed(browser)"
                                                v-bind:class="{ disabled: running[browser.id] }"
                                                v-bind:disabled="running[browser.id]">
                                        </div>
                                        <div class="sep">/</div>
                                        <div class="field field-delay"
                                            v-tippy="{ placement: 'top', content: 'Delay in milliseconds for the NDI audio-stream.<br/>Usually you want to use 0 or up to about 150.' }">
                                            <input type="text" v-model="browser.o" v-on:keyup="changed(browser)"
                                                v-bind:class="{ disabled: running[browser.id] }"
                                                v-bind:disabled="running[browser.id]">
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="row-left">
                                        <div class="field field-start"
                                            v-tippy="{ placement: 'top', content: 'Start browser.' }"
                                            v-bind:class="{ disabled: (!browser.D && !browser.N) || browser.u === '' }"
                                            v-on:click="control('start', browser.id)">
                                            <i class="fas fa-play"></i> &nbsp;START
                                        </div>
                                        <div class="field field-reload"
                                            v-tippy="{ placement: 'top', content: 'Reload browser.' }"
                                            v-on:click="control('reload', browser.id)">
                                            <i class="fas fa-redo"></i> &nbsp;RELOAD
                                        </div>
                                        <div class="field field-stop"
                                            v-tippy="{ placement: 'top', content: 'Stop browser.' }"
                                            v-on:click="control('stop', browser.id)">
                                            <i class="fas fa-pause"></i> &nbsp;STOP
                                        </div>
                                        <div
                                            v-tippy="{ placement: 'top', content: 'Click to ' + (browser.P ? 'disable' : 'enable') + ' the Web Content<br/>preview thumbnail image' + (!running[browser.id] ? '<br/>once the browser is running' : '') + '.' }"
                                            class="field field-preview" v-on:click="toggle(browser, 'P', [ true, false ])">
                                            <span v-show="browser.P === true"><i class="fas fa-eye"></i></span>
                                            <span v-show="browser.P === false"><i class="fas fa-eye-slash"></i></span>
                                            &nbsp;PREVIEW
                                        </div>
                                    </div>
                                    <div class="row-middle">
                                    </div>
                                    <div class="row-right">
                                        <div class="stat" v-if="running[browser.id]">
                                            <span
                                                v-tippy="{ placement: 'top', content: 'Shows the CPU performance (milliseconds per frame)<br/>of the browser Web Content rendering.' }"
                                                class="stat-item" v-if="browser.N || browser.P">
                                            CPU: {{ Math.round(burst[browser.id].video.avg) }}+{{ Math.round(burst[browser.id].audio.avg) }}={{ Math.round(burst[browser.id].video.avg + burst[browser.id].audio.avg) }} / {{ stat[browser.id].fps > 0 ? Math.round(1000 / stat[browser.id].fps) : "-" }} ms/f
                                            </span>
                                            <span
                                                v-tippy="{ placement: 'top', content: 'Shows the graphics performance (frames per second)<br/>of the browser Web Content rendering.' }"
                                                class="stat-item">
                                            GFX: {{ Math.round(stat[browser.id].fps) }} f/s
                                            </span>
                                            <span
                                                v-tippy="{ placement: 'top', content: 'Shows the memory consumption (MB)<br/>of the Web Content rendering.' }"
                                                class="stat-item">
                                            RAM: {{ stat[browser.id].memUsed.toFixed(1) }} / {{ stat[browser.id].memAvail.toFixed(0) }} MB
                                            </span>
                                            <span
                                                v-tippy="{ placement: 'top', content: 'Shows number of warnings and<br/>errors on Web Content console.<br/>Click to ' + (trace[browser.id].visible ? 'close' : 'open') + ' console output.' }"
                                                class="stat-item stat-item-trace" v-on:click="trace[browser.id].visible = !trace[browser.id].visible">
                                            CON: {{ trace[browser.id].warning }} W, {{ trace[browser.id].error }} E
                                            </span>
                                        </div>
                                    </div>
                                </div>
                                <div class="row" v-show="running[browser.id] && trace[browser.id].visible">
                                    <div class="console" v-bind:ref="'console-' + browser.id">
                                        <div class="console-line" v-for="(message, i) in trace[browser.id].messages" v-bind:key="i">
                                            <div class="console-level">{{ message.level }}:</div>
                                            <div class="console-message">{{ message.message }}</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </perfect-scrollbar>
            </div>
        </div>
    </body>
    <script type="text/javascript" src="vingester-control.js"></script>
</html>
